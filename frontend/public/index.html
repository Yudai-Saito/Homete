<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8" />
    <meta name="description" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="icon" href="<%= BASE_URL %>favicon.ico" />
    <title><%= htmlWebpackPlugin.options.title %></title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="manifest" href="/manifest.json" />
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.getRegistration().then((registration) => {
          // 登録中の SW がなければ、これが初回登録である
          const firstRegistration = registration === undefined;
          // SW を登録する
          navigator.serviceWorker.register("sw.js").then((registration) => {
            // 初回登録でなければ更新が見つかったかチェックする
            if (!firstRegistration) {
              registration.addEventListener("updatefound", () => {
                const installingWorker = registration.installing;
                if (installingWorker != null) {
                  installingWorker.onstatechange = (e) => {
                    if (e.target.state == "installed") {
                      if (
                        !alert(
                          "更新があります。OKからアプリを再起動してください。"
                        )
                      ) {
                        navigator.serviceWorker.controller.postMessage(
                          "updateCache"
                        );
                        setTimeout(function () {
                          location.reload();
                        });
                      }
                    }
                  };
                }
              });
            }
          });
        });
      }
    </script>
  </head>
  <body>
    <noscript>
      <strong>JavaScriptが有効になっていません</strong>
    </noscript>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
